// Generated by CoffeeScript 1.4.0
(function() {

  (function($) {
    var navLinks, scrollLoad;
    navLinks = $('.nav:eq(0) > li').not('.divider-vertical').slice(0, 2);
    scrollLoad = function() {
      var $cur_info, $new_posts, cursor_string, more_to_load, page_num, speed, url, wantsHot;
      wantsHot = $(navLinks[0]).hasClass('active');
      $cur_info = $('#cur_info').detach();
      cursor_string = $cur_info.data('cur_string');
      page_num = parseInt($cur_info.data('page_num')) + 1;
      more_to_load = $cur_info.data('more_content');
      $new_posts = $('<div>');
      speed = 2000;
      url = '/';
      if (!more_to_load) {
        return false;
      }
      return $new_posts.load("" + url + " .link_wrapper > ", {
        cur_string: cursor_string,
        page_num: page_num,
        sort: wantsHot ? 'hot' : 'new'
      }, function() {
        return $new_posts.children().hide().appendTo('.link_wrapper').fadeIn(speed);
      });
    };
    return $(window).on('scroll', function() {
      var scrollTimeout;
      if ($(this).scrollTop() === $(document).height() - $(this).height()) {
        if (scrollTimeout) {
          clearTimeout(scrollTimeout);
        }
        return scrollTimeout = setTimeout(scrollLoad, 200);
      }
    });
  })(jQuery);

}).call(this);
